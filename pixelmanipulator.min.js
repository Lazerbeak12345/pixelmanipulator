window.p=window.pixelManipulator=Object.create({getPixel:function(){},confirmElm:function(){},whatIs:function(){},loopint:0,imageData:{},zoomX:0,zoomY:0,row:0,elementTypeMap:{blank:{color:[0,0,0,255]}},mode:"paused",zoomScaleFactor:20,ctx:{},canvas:{},zoomelm:{},zoomctx:{},zoomctxStrokeStyle:"gray",defaultElm:"blank",onIterate:function(){},onAfterIterate:function(){},pixelCounts:{},presentElements:[],frames:0},{licence:{value:"pixelmanipulator.js v1.66.150 (beta-proposed) Copyright (C) 2018  Nathan Fritzler\nThis program comes with ABSOLUTELY NO WARRANTY\nThis is free software, and you are welcome to redistribute it\nunder certain conditions, as according to the GNU GENERAL PUBLIC LICENSE."},__TEMPLATES__:{value:{__LIFE__:{__INDEX__:function(o,i){if(i.pattern.search(/B\d{0,9}\/S\d{0,9}/gi)<=-1)return[];var a=i.pattern.split(/\/*[a-z]/gi),n=a[1],l=a[2];return i.loop=void 0===i.loop||i.loop,console.log("Life Pattern found: ",o,i),[window.pixelManipulator.__TEMPLATES__.__LIFE__.__LIVE__(l,i.loop,o),window.pixelManipulator.__TEMPLATES__.__LIFE__.__DEAD__(n,i.loop,o)]},__LIVE__:function(a,n,l){return function(o){var i=o.mooreNearbyCounter(l,n);a.search(i)<=-1&&window.pixelManipulator.setPixel(o.x,o.y,window.pixelManipulator.defaultElm)}},__DEAD__:function(a,n,l){return function(o){var i=o.mooreNearbyCounter(l,n);-1<a.search(i)&&p.setPixel(o.x,o.y,l)}}},__WOLFRAM__:{__INDEX__:function(o,i){if(i.pattern.search(/Rule \d*/gi)<=-1)return[];var a=(i.pattern.split(/Rule /gi)[1]-0).toString(2).padStart(8,"0");return i.loop=void 0!==i.loop&&i.loop,console.log("Wolfram pattern found: ",o,i),[void 0,window.pixelManipulator.__TEMPLATES__.__WOLFRAM__.__DEAD__(o,a,i.loop)]},__DEAD__:function(a,n,l){return function(o){if(o.y===window.pixelManipulator.row)for(var i=0;i<8;i++)if("1"==n[i]&&o.wolframNearby(o.x,o.y,a,(7-i).toString(2).padStart(3,"0"),l))return void window.pixelManipulator.setPixel(o.x,o.y,a,l)}}}}},randomlyFill:{value:function(o,i){o=o||15;for(var a=0;a<window.pixelManipulator.canvas.width;a++)for(var n=0;n<window.pixelManipulator.canvas.height;n++)100*Math.random()<o&&window.pixelManipulator.setPixel(a,n,i)}},addMultipleElements:{value:function(o){for(var i in o)window.pixelManipulator.addElement(i,o[i])}},addElement:{value:function(o,i){for(arguments.length<2&&(i=o,o=void 0),void 0===o&&(o=i.name),void 0===i.color&&(i.color=[255,255,255,255]);i.color.length<4;)i.color.push(255);if("string"==typeof i.pattern)for(var a in window.pixelManipulator.__TEMPLATES__){var n=window.pixelManipulator.__TEMPLATES__[a].__INDEX__(o,i);0!==n.length&&(void 0===i.liveCell&&"function"==typeof n[0]&&(i.liveCell=n[0]),void 0===i.deadCell&&"function"==typeof n[1]&&(i.deadCell=n[1]))}window.pixelManipulator.elementTypeMap[o]=i}},WhatIs:{value:function(o){var l=window.pixelManipulator.ConfirmElm(o);return function(o,i,a){for(var n=0;n<window.pixelManipulator.presentElements.length;n++)if(l(o,i,window.pixelManipulator.presentElements[n],a))return window.pixelManipulator.presentElements[n]}}},setCanvasSizes:{value:function(o){window.pixelManipulator.canvas.width=o.canvasW||window.pixelManipulator.canvas.width,window.pixelManipulator.canvas.height=o.canvasH||window.pixelManipulator.canvas.height,void 0!==window.pixelManipulator.zoomelm.height&&(window.pixelManipulator.zoomelm.width=(o.zoomW||window.pixelManipulator.zoomelm.width/window.pixelManipulator.zoomScaleFactor)*window.pixelManipulator.zoomScaleFactor,window.pixelManipulator.zoomelm.height=(o.zoomH||window.pixelManipulator.zoomelm.height/window.pixelManipulator.zoomScaleFactor)*window.pixelManipulator.zoomScaleFactor),window.pixelManipulator.updateData()}},play:{value:function(o){void 0!==o&&window.pixelManipulator.reset(o),window.pixelManipulator.mode="playing",window.pixelManipulator.loopint=setInterval(window.pixelManipulator.iterate,1)}},reset:{value:function(o){clearInterval(window.pixelManipulator.loopint),window.pixelManipulator.setCanvasSizes(o);for(var i=0;i<window.pixelManipulator.canvas.width;i++)for(var a=0;a<window.pixelManipulator.canvas.height;a++)window.pixelManipulator.setPixel(i,a,window.pixelManipulator.defaultElm);window.pixelManipulator.update(),window.pixelManipulator.ctx.putImageData(window.pixelManipulator.imageData,0,0),window.pixelManipulator.row=0,window.pixelManipulator.frames=0}},pause:{value:function(){window.pixelManipulator.mode="paused",clearInterval(window.pixelManipulator.loopint)}},zoom:{value:function(o){if(void 0!==window.pixelManipulator.zoomelm.height){0<=o.x&&0<=o.y&&(window.pixelManipulator.zoomX=o.x,window.pixelManipulator.zoomY=o.y),window.pixelManipulator.canvas.height<2&&(window.pixelManipulator.canvas.height=400),window.pixelManipulator.canvas.width<2&&(window.pixelManipulator.canvas.width=400),window.pixelManipulator.zoomctx.clearRect(0,0,window.pixelManipulator.zoomelm.width,window.pixelManipulator.zoomelm.height),window.pixelManipulator.zoomctx.drawImage(window.pixelManipulator.canvas,window.pixelManipulator.zoomX-Math.floor(window.pixelManipulator.zoomScaleFactor/2),window.pixelManipulator.zoomY-Math.floor(window.pixelManipulator.zoomScaleFactor/2),Math.floor(window.pixelManipulator.zoomelm.width/window.pixelManipulator.zoomScaleFactor),Math.floor(window.pixelManipulator.zoomelm.height/window.pixelManipulator.zoomScaleFactor),0,0,window.pixelManipulator.zoomelm.width,window.pixelManipulator.zoomelm.height),window.pixelManipulator.zoomctx.beginPath();for(var i=1;i<window.pixelManipulator.zoomelm.width/window.pixelManipulator.zoomScaleFactor;i++)window.pixelManipulator.zoomctx.moveTo(i*window.pixelManipulator.zoomScaleFactor,0),window.pixelManipulator.zoomctx.lineTo(i*window.pixelManipulator.zoomScaleFactor,window.pixelManipulator.zoomelm.height);for(i=1;i<window.pixelManipulator.zoomelm.height/window.pixelManipulator.zoomScaleFactor;i++)window.pixelManipulator.zoomctx.moveTo(0,i*window.pixelManipulator.zoomScaleFactor),window.pixelManipulator.zoomctx.lineTo(window.pixelManipulator.zoomelm.width,i*window.pixelManipulator.zoomScaleFactor);window.pixelManipulator.zoomctx.stroke()}}},GetPixel:{value:function(n){return function(o,i,a){if(a=void 0===a||a){for(;o<0;)o=window.pixelManipulator.canvas.width+o;for(;i<0;)i=window.pixelManipulator.canvas.height+i;for(;o>=window.pixelManipulator.canvas.width;)o-=window.pixelManipulator.canvas.width;for(;i>=window.pixelManipulator.canvas.height;)i-=window.pixelManipulator.canvas.height}else if(o<0||o>=window.pixelManipulator.canvas.width||i<0||o>=window.pixelManipulator.canvas.height)return"Blocks";return n.slice(4*(window.pixelManipulator.canvas.width*i+o),4*(window.pixelManipulator.canvas.width*i+o)+4)}}},update:{value:function(){window.pixelManipulator.ctx.putImageData(window.pixelManipulator.imageData,0,0)}},ConfirmElm:{value:function(t){return function(o,i,a,n){var l=t(o,i,n),e=window.pixelManipulator.elementTypeMap[a].color;return l[0]==(e[0]||0)&&l[1]==(e[1]||0)&&l[2]==(e[2]||0)&&l[3]==(e[3]||255)}}},MooreNearbyCounter:{value:function(a,n,o){var l=window.pixelManipulator.ConfirmElm(o);return function(o,i){return l(a-1,n-1,o,i)+l(a-1,n,o,i)+l(a-1,n+1,o,i)+l(a,n-1,o,i)+l(a,n+1,o,i)+l(a+1,n-1,o,i)+l(a+1,n,o,i)+l(a+1,n+1,o,i)}}},WolframNearby:{value:function(o){var t=window.pixelManipulator.ConfirmElm(o);return function(o,i,a,n,l){var e=[t(o-1,i-1,a,l=void 0!==l&&l),t(o,i-1,a,l),t(o+1,i-1,a,l)];return e[0]==n[0]&&e[1]==n[1]&&e[2]==n[2]}}},setPixel:{value:function(o,i,a,n){if(o=Math.floor(o).toString()-0,i=Math.floor(i).toString()-0,n=void 0===n||n,"string"==typeof a&&(window.pixelManipulator.presentElements.includes(a)||window.pixelManipulator.presentElements.push(a),a=window.pixelManipulator.elementTypeMap[a].color),n){for(;o<0;)o=window.pixelManipulator.canvas.width+o;for(;i<0;)i=window.pixelManipulator.canvas.height+i;for(;o>=window.pixelManipulator.canvas.width;)o-=window.pixelManipulator.canvas.width;for(;i>=window.pixelManipulator.canvas.height;)i-=window.pixelManipulator.canvas.height}else if(o<0||o>=window.pixelManipulator.canvas.width||i<0||o>=window.pixelManipulator.canvas.height)return;for(var l=0;l<4;l++)window.pixelManipulator.imageData.data[4*(window.pixelManipulator.canvas.width*i+o)+l]=a[l]}},iterate:{value:function(){window.pixelManipulator.onIterate();for(var o=[],i=0;i<window.pixelManipulator.imageData.data.length;i++)o[i]=window.pixelManipulator.imageData.data[i]-0;var a=window.pixelManipulator.GetPixel(o),n=function(o){"function"==typeof window.pixelManipulator.elementTypeMap[o].deadCell&&window.pixelManipulator.elementTypeMap[o].deadCell(t)};window.pixelManipulator.pixelCounts={};for(var l=0;l<window.pixelManipulator.canvas.width;l++)for(var e=0;e<window.pixelManipulator.canvas.height;e++){var t={x:l,y:e,getOldPixel:a,confirmOldElm:window.pixelManipulator.ConfirmElm(a),mooreNearbyCounter:window.pixelManipulator.MooreNearbyCounter(l,e,a),wolframNearby:window.pixelManipulator.WolframNearby(a)};if(window.pixelManipulator.confirmElm(l,e,"blank"))window.pixelManipulator.presentElements.forEach(n);else{var r=window.pixelManipulator.whatIs(l,e);"function"==typeof window.pixelManipulator.elementTypeMap[r].liveCell&&window.pixelManipulator.elementTypeMap[r].liveCell(t),void 0===window.pixelManipulator.pixelCounts[r]?window.pixelManipulator.pixelCounts[r]=1:window.pixelManipulator.pixelCounts[r]++}}window.pixelManipulator.row++,window.pixelManipulator.row>window.pixelManipulator.canvas.height&&(window.pixelManipulator.row=0),window.pixelManipulator.frames++,window.pixelManipulator.update(),window.pixelManipulator.zoom({x:window.pixelManipulator.zoomX,y:window.pixelManipulator.zoomY}),window.pixelManipulator.onAfterIterate()}},updateData:{value:function(){window.pixelManipulator.imageData=window.pixelManipulator.ctx.getImageData(0,0,window.pixelManipulator.canvas.width,window.pixelManipulator.canvas.height),window.pixelManipulator.ctx.imageSmoothingEnabled=!1,window.pixelManipulator.ctx.mozImageSmoothingEnabled=!1,window.pixelManipulator.ctx.webkitImageSmoothingEnabled=!1,window.pixelManipulator.ctx.msImageSmoothingEnabled=!1,void 0!==window.pixelManipulator.zoomelm.height&&(window.pixelManipulator.zoomctx.imageSmoothingEnabled=!1,window.pixelManipulator.zoomctx.mozImageSmoothingEnabled=!1,window.pixelManipulator.zoomctx.webkitImageSmoothingEnabled=!1,window.pixelManipulator.zoomctx.msImageSmoothingEnabled=!1,window.pixelManipulator.zoomctx.strokeStyle=window.pixelManipulator.zoomctxStrokeStyle),window.pixelManipulator.getPixel=window.pixelManipulator.GetPixel(window.pixelManipulator.imageData.data),window.pixelManipulator.confirmElm=window.pixelManipulator.ConfirmElm(window.pixelManipulator.getPixel),window.pixelManipulator.whatIs=window.pixelManipulator.WhatIs(window.pixelManipulator.getPixel)}},setCanvas:{value:function(o){return window.pixelManipulator.canvas=o,window.pixelManipulator.ctx=window.pixelManipulator.canvas.getContext("2d"),window.pixelManipulator.canvas}},setZoomelm:{value:function(o){return window.pixelManipulator.zoomelm=o,window.pixelManipulator.zoomctx=window.pixelManipulator.zoomelm.getContext("2d"),window.pixelManipulator.zoomelm}},canvasPrep:{value:function(o){window.pixelManipulator.setCanvas(o.canvas),void 0!==o.zoom&&window.pixelManipulator.setZoomelm(o.zoom),window.pixelManipulator.updateData(),void 0!==o.zoom&&window.pixelManipulator.zoom({x:Math.floor(window.pixelManipulator.canvas.width/2)-Math.floor(window.pixelManipulator.zoomelm.width/2)*window.pixelManipulator.zoomScaleFactor,y:Math.floor(window.pixelManipulator.zoomelm.height/2)-Math.floor(window.pixelManipulator.zoomelm.height/2)*window.pixelManipulator.zoomScaleFactor})}}});