!function(a){"use strict";function o(o,e,t){void 0===a.window&&console.warn("This enviroment has not been tested, and is officially not supported.\nGood luck.");var c={get version(){return"2.0.0"},get licence(){return"PixelManipulator v"+this.version+" Copyright (C) 2018-2019 Nathan Fritzler\nThis program comes with ABSOLUTELY NO WARRANTY\nThis is free software, and you are welcome to redistribute it\nunder certain conditions, as according to the GNU GENERAL PUBLIC LICENSE."},loopint:0,zoomX:0,zoomY:0,row:0,elementTypeMap:{blank:{color:[0,0,0,255]}},mode:"paused",zoomScaleFactor:20,zoomctxStrokeStyle:"gray",defaultElm:"blank",onIterate:function(){},onAfterIterate:function(){},presentElements:[],__templates:{__LIFE__:{__index__:function(o,e){if(e.pattern.search(/B\d{0,9}\/S\d{0,9}/gi)<=-1)return[];var t=e.pattern.split(/\/*[a-z]/gi);return e.loop=void 0===e.loop||e.loop,console.log("Life Pattern found: ",o,e),[c.__templates.__LIFE__.__LIVE__(t[2],e.loop,o),c.__templates.__LIFE__.__DEAD__(t[1],e.loop,o)]},__LIVE__:function(e,t,a){return function(o){e.search(o.mooreNearbyCounter(o.x,o.y,a,t))<=-1&&c.setPixel(o.x,o.y,c.defaultElm)}},__DEAD__:function(e,t,a){return function(o){-1<e.search(o.mooreNearbyCounter(o.x,o.y,a,t))&&c.setPixel(o.x,o.y,a)}}},__WOLFRAM__:{__index__:function(o,e){if(e.pattern.search(/Rule \d*/gi)<=-1)return[];var t=(e.pattern.split(/Rule /gi)[1]-0).toString(2).padStart(8,"0");return e.loop=void 0!==e.loop&&e.loop,console.log("Wolfram pattern found: ",o,e),[void 0,c.__templates.__WOLFRAM__.__DEAD__(o,t,e.loop)]},__DEAD__:function(t,a,n){return function(o){if(o.y===c.row)for(var e=0;e<8;e++)if("1"==a[e]&&o.wolframNearbyCounter(o.x,o.y,t,(7-e).toString(2).padStart(3,"0"),n))return void c.setPixel(o.x,o.y,t,n)}}}},randomlyFill:function(o,e){1===arguments.length&&(e=o,o=void 0),o=o||15;for(var t=0;t<c.canvas.width;t++)for(var a=0;a<c.canvas.height;a++)100*Math.random()<o&&c.setPixel(t,a,e)},addMultipleElements:function(o){for(var e in o)c.addElement(e,o[e])},addElement:function(o,e){for(arguments.length<2&&(e=o,o=void 0),void 0===o&&(o=e.name),void 0===e.color&&(e.color=[255,255,255,255]);e.color.length<4;)e.color.push(255);if("string"==typeof e.pattern)for(var t in c.__templates){var a=c.__templates[t].__index__(o,e);0!==a.length&&(void 0===e.liveCell&&"function"==typeof a[0]&&(e.liveCell=a[0]),void 0===e.deadCell&&"function"==typeof a[1]&&(e.deadCell=a[1]))}c.elementTypeMap[o]=e},__WhatIs:function(n){return function(o,e,t){for(var a=0;a<c.presentElements.length;a++)if(n(o,e,c.presentElements[a],t))return c.presentElements[a]}},play:function(o){"playing"===c.mode&&c.reset(o),c.mode="playing",c.loopint=setInterval(c.iterate,1)},reset:function(o){c.pause(),c.canvas.width=o.canvasW||c.canvas.width,c.canvas.height=o.canvasH||c.canvas.height,void 0!==c.zoomelm&&(c.zoomelm.width=(o.zoomW||c.zoomelm.width/c.zoomScaleFactor)*c.zoomScaleFactor,c.zoomelm.height=(o.zoomH||c.zoomelm.height/c.zoomScaleFactor)*c.zoomScaleFactor),c.updateData();for(var e=0;e<c.canvas.width;e++)for(var t=0;t<c.canvas.height;t++)c.setPixel(e,t,c.defaultElm);c.update(),c.ctx.putImageData(c.imageData,0,0),c.row=0},pause:function(){c.mode="paused",clearInterval(c.loopint)},zoom:function(o){if(void 0!==c.zoomelm.height){void 0===o&&(o={}),void 0===o.x&&(o.x=c.zoomX),void 0===o.y&&(o.x=c.zoomY),0<=o.x&&0<=o.y&&(c.zoomX=o.x,c.zoomY=o.y),c.canvas.height<2&&(c.canvas.height=400),c.canvas.width<2&&(c.canvas.width=400),c.zoomctx.clearRect(0,0,c.zoomelm.width,c.zoomelm.height),c.zoomctx.drawImage(c.canvas,c.zoomX-Math.floor(c.zoomScaleFactor/2),c.zoomY-Math.floor(c.zoomScaleFactor/2),Math.floor(c.zoomelm.width/c.zoomScaleFactor),Math.floor(c.zoomelm.height/c.zoomScaleFactor),0,0,c.zoomelm.width,c.zoomelm.height),c.zoomctx.beginPath();for(var e=1;e<c.zoomelm.width/c.zoomScaleFactor;e++)c.zoomctx.moveTo(e*c.zoomScaleFactor,0),c.zoomctx.lineTo(e*c.zoomScaleFactor,c.zoomelm.height);for(e=1;e<c.zoomelm.height/c.zoomScaleFactor;e++)c.zoomctx.moveTo(0,e*c.zoomScaleFactor),c.zoomctx.lineTo(c.zoomelm.width,e*c.zoomScaleFactor);c.zoomctx.stroke()}},__GetPixel:function(a){return function(o,e,t){if(t=void 0===t||t){for(;o<0;)o=c.canvas.width+o;for(;e<0;)e=c.canvas.height+e;for(;o>=c.canvas.width;)o-=c.canvas.width;for(;e>=c.canvas.height;)e-=c.canvas.height}else if(o<0||o>=c.canvas.width||e<0||o>=c.canvas.height)return"Blocks";return a.slice(4*(c.canvas.width*e+o),4*(c.canvas.width*e+o)+4)}},update:function(){c.ctx.putImageData(c.imageData,0,0),void 0!==c.zoomelm&&c.zoom()},__ConfirmElm:function(r){return function(o,e,t,a){var n=r(o,e,a),i=c.elementTypeMap[t].color;return n[0]==(i[0]||0)&&n[1]==(i[1]||0)&&n[2]==(i[2]||0)&&n[3]==(i[3]||255)}},__MooreNearbyCounter:function(n){return function(o,e,t,a){return n(o-1,e-1,t,a)+n(o-1,e,t,a)+n(o-1,e+1,t,a)+n(o,e-1,t,a)+n(o,e+1,t,a)+n(o+1,e-1,t,a)+n(o+1,e,t,a)+n(o+1,e+1,t,a)}},__WolframNearbyCounter:function(r){return function(o,e,t,a,n){var i=[r(o-1,e-1,t,n=void 0!==n&&n),r(o,e-1,t,n),r(o+1,e-1,t,n)];return i[0]==a[0]&&i[1]==a[1]&&i[2]==a[2]}},setPixel:function(o,e,t,a){for(o=Math.floor(o).toString()-0,e=Math.floor(e).toString()-0,a=void 0===a||a,"string"==typeof t&&(c.presentElements.includes(t)||c.presentElements.push(t),t=c.elementTypeMap[t].color);t.length<4;)t.push(255);if(a){for(;o<0;)o=c.canvas.width+o;for(;e<0;)e=c.canvas.height+e;for(;o>=c.canvas.width;)o-=c.canvas.width;for(;e>=c.canvas.height;)e-=c.canvas.height}else if(o<0||o>=c.canvas.width||e<0||o>=c.canvas.height)return;for(var n=0;n<4;n++)c.imageData.data[4*(c.canvas.width*e+o)+n]=t[n]},iterate:function(){c.onIterate();for(var o=[],e=0;e<c.imageData.data.length;e++)o[e]=c.imageData.data[e]-0;var t=c.__GetPixel(o),a=function(o){"function"==typeof c.elementTypeMap[o].deadCell&&c.elementTypeMap[o].deadCell(l)};c.pixelCounts={};for(var n=0;n<c.canvas.width;n++)for(var i=0;i<c.canvas.height;i++){var r=c.__ConfirmElm(t),l={x:n,y:i,getOldPixel:t,confirmOldElm:r,mooreNearbyCounter:c.__MooreNearbyCounter(r),wolframNearbyCounter:c.__WolframNearbyCounter(r)};if(c.confirmElm(n,i,"blank"))c.presentElements.forEach(a);else{var m=c.whatIs(n,i);"function"==typeof c.elementTypeMap[m].liveCell&&c.elementTypeMap[m].liveCell(l),void 0===c.pixelCounts[m]?c.pixelCounts[m]=1:c.pixelCounts[m]++}}c.row++,c.row>c.canvas.height&&(c.row=0),c.update(),c.onAfterIterate()},updateData:function(){c.imageData=c.ctx.getImageData(0,0,c.canvas.width,c.canvas.height),c.ctx.imageSmoothingEnabled=!1,c.ctx.mozImageSmoothingEnabled=!1,c.ctx.webkitImageSmoothingEnabled=!1,c.ctx.msImageSmoothingEnabled=!1,void 0!==c.zoomelm&&(c.zoomctx.imageSmoothingEnabled=!1,c.zoomctx.mozImageSmoothingEnabled=!1,c.zoomctx.webkitImageSmoothingEnabled=!1,c.zoomctx.msImageSmoothingEnabled=!1,c.zoomctx.strokeStyle=c.zoomctxStrokeStyle),c.getPixel=c.__GetPixel(c.imageData.data),c.confirmElm=c.__ConfirmElm(c.getPixel),c.whatIs=c.__WhatIs(c.confirmElm)},canvasPrep:function(o){c.canvas=o.canvas,c.ctx=c.canvas.getContext("2d"),void 0!==o.zoom&&(c.zoomelm=o.zoom,c.zoomctx=c.zoomelm.getContext("2d")),c.updateData(),void 0!==o.zoom&&c.zoom({x:Math.floor(c.canvas.width/2)-Math.floor(c.zoomelm.width/2)*c.zoomScaleFactor,y:Math.floor(c.zoomelm.height/2)-Math.floor(c.zoomelm.height/2)*c.zoomScaleFactor})}};if(console.log(c.licence),void 0===t)return c;t.exports=c}void 0===a.require&&void 0===a.module?a.p=a.pixelManipulator=o():void 0!==a.define&&void 0===a.module?a.define(["require","exports","module"],o):o(require,exports,module)}(this);