var e,t=globalThis,n={},r={},i=t.parcelRequire94c2;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){r[e]=t},t.parcelRequire94c2=i);var l=i.register;l("ka9Le",function(e,t){var n;e.exports,n=function(e,t,n,r){return class extends n{constructor(t,n){if(super(),!(t=r.getElement(t)))return;this._element=t,this._config=this._getConfig(n),e.set(this._element,this.constructor.DATA_KEY,this)}dispose(){for(let n of(e.remove(this._element,this.constructor.DATA_KEY),t.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this)))this[n]=null}_queueCallback(e,t,n=!0){r.executeAfterTransition(e,t,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(t){return e.get(r.getElement(t),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}},e.exports=n(i("3DQH2"),i("dfTqR"),i("4o82T"),i("9Dw5O"))}),l("3DQH2",function(e,t){var n;e.exports,n=function(){let e=new Map;return{set(t,n,r){e.has(t)||e.set(t,new Map);let i=e.get(t);if(!i.has(n)&&0!==i.size){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(n,r)},get:(t,n)=>e.has(t)&&e.get(t).get(n)||null,remove(t,n){if(!e.has(t))return;let r=e.get(t);r.delete(n),0===r.size&&e.delete(t)}}},e.exports=n()}),l("dfTqR",function(e,t){var n;e.exports,n=function(e){let t=/[^.]*(?=\..*)\.|.*/,n=/\..*/,r=/::\d+$/,i={},l=1,o={mouseenter:"mouseover",mouseleave:"mouseout"},s=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function a(e,t){return t&&`${t}::${l++}`||e.uidEvent||l++}function d(e){let t=a(e);return e.uidEvent=t,i[t]=i[t]||{},i[t]}function u(e,t,n=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===n)}function c(e,t,n){let r="string"==typeof t,i=f(e);return s.has(i)||(i=e),[r,r?n:t||n,i]}function h(e,n,r,i,l){var s,h;if("string"!=typeof n||!e)return;let[m,f,y]=c(n,r,i);if(n in o){let e;e=f,f=function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)}}let x=d(e),E=x[y]||(x[y]={}),v=u(E,f,m?r:null);if(v){v.oneOff=v.oneOff&&l;return}let b=a(f,n.replace(t,"")),w=m?(s=f,function t(n){let i=e.querySelectorAll(r);for(let{target:l}=n;l&&l!==this;l=l.parentNode)for(let o of i)if(o===l)return p(n,{delegateTarget:l}),t.oneOff&&g.off(e,n.type,r,s),s.apply(l,[n])}):(h=f,function t(n){return p(n,{delegateTarget:e}),t.oneOff&&g.off(e,n.type,h),h.apply(e,[n])});w.delegationSelector=m?r:null,w.callable=f,w.oneOff=l,w.uidEvent=b,E[b]=w,e.addEventListener(y,w,m)}function m(e,t,n,r,i){let l=u(t[n],r,i);l&&(e.removeEventListener(n,l,!!i),delete t[n][l.uidEvent])}function f(e){return o[e=e.replace(n,"")]||e}let g={on(e,t,n,r){h(e,t,n,r,!1)},one(e,t,n,r){h(e,t,n,r,!0)},off(e,t,n,i){if("string"!=typeof t||!e)return;let[l,o,s]=c(t,n,i),a=s!==t,u=d(e),h=u[s]||{},f=t.startsWith(".");if(void 0!==o){if(!Object.keys(h).length)return;m(e,u,s,o,l?n:null);return}if(f)for(let n of Object.keys(u))!function(e,t,n,r){for(let[i,l]of Object.entries(t[n]||{}))i.includes(r)&&m(e,t,n,l.callable,l.delegationSelector)}(e,u,n,t.slice(1));for(let[n,i]of Object.entries(h)){let l=n.replace(r,"");(!a||t.includes(l))&&m(e,u,s,i.callable,i.delegationSelector)}},trigger(t,n,r){if("string"!=typeof n||!t)return null;let i=e.getjQuery(),l=f(n),o=null,s=!0,a=!0,d=!1;n!==l&&i&&(o=i.Event(n,r),i(t).trigger(o),s=!o.isPropagationStopped(),a=!o.isImmediatePropagationStopped(),d=o.isDefaultPrevented());let u=p(new Event(n,{bubbles:s,cancelable:!0}),r);return d&&u.preventDefault(),a&&t.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function p(e,t={}){for(let[n,r]of Object.entries(t))try{e[n]=r}catch(t){Object.defineProperty(e,n,{configurable:!0,get:()=>r})}return e}return g},e.exports=n(i("9Dw5O"))}),l("9Dw5O",function(e,t){e.exports,function(e){let t="transitionend",n=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),r=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e),r=Number.parseFloat(t),i=Number.parseFloat(n);return r||i?(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*1e3):0},i=e=>{e.dispatchEvent(new Event(t))},l=e=>!!e&&"object"==typeof e&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),o=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){let t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?o(e.parentNode):null},s=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,a=[],d=e=>{"loading"===document.readyState?(a.length||document.addEventListener("DOMContentLoaded",()=>{for(let e of a)e()}),a.push(e)):e()},u=(e,t=[],n=e)=>"function"==typeof e?e(...t):n;e.defineJQueryPlugin=e=>{d(()=>{let t=s();if(t){let n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}})},e.execute=u,e.executeAfterTransition=(e,n,l=!0)=>{if(!l){u(e);return}let o=r(n)+5,s=!1,a=({target:r})=>{r===n&&(s=!0,n.removeEventListener(t,a),u(e))};n.addEventListener(t,a),setTimeout(()=>{s||i(n)},o)},e.findShadowRoot=o,e.getElement=e=>l(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(n(e)):null,e.getNextActiveElement=(e,t,n,r)=>{let i=e.length,l=e.indexOf(t);return -1===l?!n&&r?e[i-1]:e[0]:(l+=n?1:-1,r&&(l=(l+i)%i),e[Math.max(0,Math.min(l,i-1))])},e.getTransitionDurationFromElement=r,e.getUID=e=>{do e+=Math.floor(1e6*Math.random());while(document.getElementById(e))return e},e.getjQuery=s,e.isDisabled=e=>!!(!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled"))||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),e.isElement=l,e.isRTL=()=>"rtl"===document.documentElement.dir,e.isVisible=e=>{if(!l(e)||0===e.getClientRects().length)return!1;let t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){let t=e.closest("summary");if(t&&t.parentNode!==n||null===t)return!1}return t},e.noop=()=>{},e.onDOMContentLoaded=d,e.parseSelector=n,e.reflow=e=>{e.offsetHeight},e.toType=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),e.triggerTransitionEnd=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}(e.exports)}),l("4o82T",function(e,t){var n;e.exports,n=function(e,t){return class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(n,r){let i=t.isElement(r)?e.getDataAttribute(r,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...t.isElement(r)?e.getDataAttributes(r):{},..."object"==typeof n?n:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(let[r,i]of Object.entries(n)){let n=e[r],l=t.isElement(n)?"element":t.toType(n);if(!new RegExp(i).test(l))throw TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${l}" but expected type "${i}".`)}}}},e.exports=n(i("B31ai"),i("9Dw5O"))}),l("B31ai",function(e,t){var n;e.exports,n=function(){function e(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function t(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}return{setDataAttribute(e,n,r){e.setAttribute(`data-bs-${t(n)}`,r)},removeDataAttribute(e,n){e.removeAttribute(`data-bs-${t(n)}`)},getDataAttributes(t){if(!t)return{};let n={};for(let r of Object.keys(t.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"))){let i=r.replace(/^bs/,"");n[i=i.charAt(0).toLowerCase()+i.slice(1,i.length)]=e(t.dataset[r])}return n},getDataAttribute:(n,r)=>e(n.getAttribute(`data-bs-${t(r)}`))}},e.exports=n()}),l("42WhZ",function(e,t){var n;e.exports,n=function(e){let t=t=>{let n=t.getAttribute("data-bs-target");if(!n||"#"===n){let e=t.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),n=e&&"#"!==e?e.trim():null}return n?n.split(",").map(t=>e.parseSelector(t)).join(","):null},n={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){let n=[],r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){let n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(n,t).filter(t=>!e.isDisabled(t)&&e.isVisible(t))},getSelectorFromElement(e){let r=t(e);return r&&n.findOne(r)?r:null},getElementFromSelector(e){let r=t(e);return r?n.findOne(r):null},getMultipleElementsFromSelector(e){let r=t(e);return r?n.find(r):[]}};return n},e.exports=n(i("9Dw5O"))});var o={};function s(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}s(o,"rules",function(){return _}),s(o,"PixelManipulator",function(){return A}),s(o,"licence",function(){return C}),s(o,"version",function(){return I}),s(o,"neighborhoods",function(){return p});var a={};a=JSON.parse('{"name":"pixelmanipulator","version":"5.5.10","description":"A super powerful Typescript library for cellular automation.","main":"dist/main.js","browser":"dist/browser.js","module":"dist/module.js","types":"dist/types.d.ts","unpkg":"dist/bundle.js","targets":{"main":{"source":"./src/pixelmanipulator.ts"},"module":{"source":"src/pixelmanipulator.ts"},"browser":{"source":"src/pixelmanipulator.ts","outputFormat":"commonjs"},"types":{"source":"src/pixelmanipulator.ts"}},"repository":"git@github.com:Lazerbeak12345/pixelmanipulator.git","homepage":"https://lazerbeak12345.github.io/pixelmanipulator","author":"Nathan Fritzler <nfblaster@live.com>","license":"GPL-3.0-or-later","browserslist":"defaults","keywords":["cellular automata","game of life","highlife","brians-brain","wireworld","wolfram","rule-30","rule-90","rule-110","rule-184","conway","pixel","game","life","cellular","automata","automaton","gameoflife","gol","brian\'s-brain","particle","simulation","engine","grid","canvas"],"devDependencies":{"@fast-check/ava":"catalog:","@parcel/packager-ts":"catalog:","@parcel/transformer-typescript-types":"catalog:","@rollup/plugin-commonjs":"catalog:","@types/eslint":"catalog:","@types/node":"catalog:","@typescript-eslint/eslint-plugin":"catalog:","@typescript-eslint/parser":"catalog:","ava":"catalog:","c8":"catalog:","eslint":"catalog:","eslint-config-love":"catalog:","eslint-plugin-node":"catalog:","eslint-plugin-promise":"catalog:","eslint-plugin-tsdoc":"catalog:","fast-check":"catalog:","gh-pages":"^6.2.0","parcel":"catalog:","rollup":"catalog:","typedoc":"catalog:","typedoc-plugin-mdn-links":"catalog:","typescript":"catalog:"},"scripts":{"test":"pnpm run test:types && pnpm run lint && pnpm run test:test","test:types":"rm -r build; tsc --outDir build","lint":"eslint . --ignore-pattern dist --ignore-pattern docs --ignore-pattern coverage --ignore-pattern build","test:test":"c8 -r text -r text-summary -r lcov -r html --all --include build/src ava","build":"pnpm t && pnpm run build:docs && pnpm run build:parcel && pnpm build:readme && pnpm run build:bundle && pnpm run build:prepare-ci","build:docs":"typedoc --name PixelManipulator --out docs --includeVersion src/*.ts","build:parcel":"parcel build","build:readme":"cp ../../README.md .","build:bundle":"rollup -c","build:prepare-ci":"cp -r ../../.circleci docs && cp -r ../../media/* docs","watch":"parcel watch --no-hmr","updatedemo":"gh-pages -d docs -m \\"Update $npm_package_version\\" -tf"},"ava":{"timeout":"20s"},"packageManager":"pnpm@9.15.1"}');var d={};function u({x:e,y:t},n){return n*t+e}function c(e,t){let{x:n,y:r,frame:i,loop:l}=t;return e.map(e=>{let t={x:e.x+n,y:e.y+r,frame:e.frame??i,loop:e.loop??l};return null==t.frame&&delete t.frame,null==t.loop&&delete t.loop,t})}s(d,"location2Index",function(){return u}),s(d,"transposeLocations",function(){return c}),s(d,"Renderer",function(){return h}),s(d,"Ctx2dRenderer",function(){return m}),s(d,"StringRenderer",function(){return f}),s(d,"SplitRenderer",function(){return g});class h{modifyElement(e,t){if(this.renderInfo.length===e)this.renderInfo.push(t);else if(this.renderInfo.length>e)this.renderInfo[e]=t;else throw Error("Renderer received elements out of order!");return t}set_width(e){this._width=e}get_width(){return this._width}set_height(e){this._height=e}get_height(){return this._height}constructor(){this.renderInfo=[],this._width=1,this._height=1}}class m extends h{constructor(e){super(),this.defaultRenderAs=[0,0,0,255],this.canvas=e;let t=e.getContext("2d");if(null==t)throw Error("CanvasRenderingContext2D not supported in enviroment");this.ctx=t,this.imageData=this.ctx.getImageData(0,0,this.get_width(),this.get_height())}modifyElement(e,t){for(;t.length<4;)t.push(255);let n=this.renderInfo.indexOf(t);if(!(n===e||-1===n))throw Error(`The color ${JSON.stringify(t)} is already in use!`);return super.modifyElement(e,t)}renderPixel(e,t){let{renderInfo:{[t]:n}}=this;if(void 0===n)throw Error(`Invalid ID ${t}`);for(;n.length<4;)n.push(255);let r=4*function({x:e,y:t},n){return n*t+e}(e,this.get_width());for(let e=0;e<4;++e)this.imageData.data[r+e]=n[e]}reset(){this.imageData=this.ctx.getImageData(0,0,this.get_width(),this.get_height()),this.ctx.imageSmoothingEnabled=!1}update(){this.ctx.putImageData(this.imageData,0,0)}set_width(e){this.canvas.width=e,super.set_width(e)}set_height(e){this.canvas.height=e,super.set_height(e)}}class f extends h{constructor(e){super(),this.defaultRenderAs=" ",this._chars=[],this._callback=e}modifyElement(e,t){if(this.renderInfo.includes(t))throw Error(`Element ${e} must have a unique renderAs`);return super.modifyElement(e,t)}reset(){let e=this.get_width(),t=this.get_height();this._chars=Array(t).fill([]).map(()=>Array(e).fill(this.defaultRenderAs))}renderPixel({x:e,y:t},n){let{renderInfo:{[n]:r}}=this;this._chars[t][e]=r}update(){this._callback(this._chars.map(e=>e.join("")).join("\n"))}}class g extends h{constructor(e,t){super(),this.a=e,this.b=t,this.defaultRenderAs={a:e.defaultRenderAs,b:t.defaultRenderAs}}renderPixel(e,t){this.a.renderPixel(e,t),this.b.renderPixel(e,t)}reset(){this.a.reset(),this.b.reset()}update(){this.a.update(),this.b.update()}modifyElement(e,{a:t,b:n}){return super.modifyElement(e,{a:this.a.modifyElement(e,t),b:this.b.modifyElement(e,n)})}}var p={};function y(e,t){let n=[];for(let{x:r}=e;r<=t.x;r++)for(let{y:i}=e;i<=t.y;i++)n.push({x:r,y:i});return n}function x(e,t,n){e??=1,t??=-1;let r=[];for(let n=e;n>0;n--)r.push({x:-n,y:t});(null==n||n)&&r.push({x:0,y:t});for(let n=e;n>0;n--)r.push({x:n,y:t});return r}function E(e,t){t??=!1;let n=y({x:-(e??=1),y:-e},{x:e,y:e});return t?n:n.filter(({x:e,y:t})=>!(0===e&&0===t))}function v(e,t){return E(e??=1,t).filter(({x:t,y:n})=>Math.abs(t)+Math.abs(n)<=e)}function b(e,t){return E(e,t).filter(({x:t,y:n})=>Math.sqrt(Math.pow(t,2)+Math.pow(n,2))<=(e??1))}function w(e){let t=0;for(let n of e)t|=1<<parseInt(n);return t}s(p,"rect",function(){return y}),s(p,"wolfram",function(){return x}),s(p,"moore",function(){return E}),s(p,"vonNeumann",function(){return v}),s(p,"euclidean",function(){return b});const _={lifelike:function(e,t,n){let r=t.split(/\/?[a-z]/gi),i=w(r[2]),l=w(r[1]);return{madeWithRule:!0,hitbox:E(),liveCell:function({x:t,y:r,thisId:l}){(i&1<<e.mooreNearbyCounter({x:t,y:r,frame:1,loop:n},l))==0&&e.setPixel({x:t,y:r},e.defaultId)},deadCell:function({x:t,y:r,thisId:i}){(l&1<<e.mooreNearbyCounter({x:t,y:r,frame:1,loop:n},i))!=0&&e.setPixel({x:t,y:r},i)}}},wolfram:function(e,t,n){let r=parseInt(t.split(/Rule /gi)[1]);return{madeWithRule:!0,hitbox:x(1,1),liveCell:function({x:t,y:i,thisId:l}){0===i||e.wolframNewState({x:t,y:i,frame:1,loop:n},r,l)||e.setPixel({x:t,y:i,loop:n},e.defaultId)},deadCell:function({x:t,y:i,thisId:l}){e.wolframNewState({x:t,y:i,frame:1,loop:n},r,l)&&e.setPixel({x:t,y:i,loop:n},l)}}}};class A{constructor(e,t,n){this.loopint=0,this.elements=[],this.nameAliases=new Map,this.mode="paused",this.onIterate=()=>void 0,this.onAfterIterate=()=>void 0,this.onElementModified=()=>void 0,this.pixelCounts={},this.frames=[new Uint32Array(0),new Uint32Array(0)],"undefined"!=typeof window&&console.log(C),this.renderer=e,this.defaultId=this.addElement({renderAs:this.renderer.defaultRenderAs,hitbox:[],name:"blank"}),this.reset({canvasW:t,canvasH:n})}get_width(){return this.renderer.get_width()}set_width(e){this.renderer.set_width(e)}get_height(){return this.renderer.get_height()}set_height(e){this.renderer.set_height(e)}randomlyFill(e,t){t??=15;let n=this.get_width(),r=this.get_height();for(let i=0;i<n;i++)for(let n=0;n<r;n++)100*Math.random()<t&&this.setPixel({x:i,y:n},e)}addMultipleElements(e){Object.keys(e).forEach(t=>this.addElement({name:t,...e[t]}))}addElement(e){let{name:t,renderAs:n}=e;if(void 0===t)throw Error("Name is required for element");return void 0===e.name&&(e.name=t),this.elements.push({name:t,renderAs:n}),this.modifyElement(this.elements.length-1,e),this.elements.length-1}modifyElement(e,t){let n=this.elements[e];void 0!==t.name&&t.name!==n.name&&this.aliasElements(n.name,t.name);let r={hitbox:E(),...n,...t};r.renderAs=this.renderer.modifyElement(e,r.renderAs),this.elements[e]=r,this.onElementModified(e)}aliasElements(e,t){if(null!=this.elements.find(e=>e.name===t))throw Error("The name "+t+" is already in use!");this.nameAliases.delete(t),this.nameAliases.set(e,t)}nameToId(e){let t=e;for(;void 0!==t;)e=t,t=this.nameAliases.get(e);return this.elements.findIndex(t=>t.name===e)}getElementByName(e){return this.elements[this.nameToId(e)]}whatIs(e){return this.elements[this.getPixelId(e)].name}play(e){var t;"playing"===this.mode&&this.reset(e),this.mode="playing",this.loopint=(t=()=>{this.iterate()},"undefined"==typeof requestAnimationFrame?setInterval(t,1):requestAnimationFrame(t))}reset(e){void 0===e&&(e={}),this.pause();let t=e.canvasW??this.get_width(),n=e.canvasH??this.get_height();this.set_width(t),this.set_height(n),this.frames[0]=new Uint32Array(t*n),this.frames[1]=new Uint32Array(t*n),this.renderer.reset(),this.randomlyFill(this.defaultId,100),this.update()}pause(){var e;this.mode="paused",e=this.loopint,"undefined"==typeof cancelAnimationFrame?clearInterval(e):"number"==typeof e&&cancelAnimationFrame(e)}locationBoundsCheck(e){let t=this.get_width(),n=this.get_height(),r=e.x<0,i=e.x>=t,l=e.y<0,o=e.y>=n;if(e.loop??!0)e.x%=t,e.y%=n,r&&(e.x+=t),l&&(e.y+=n),e.loop=!1;else if(r||i||l||o)return null;return e}getPixelId(e){let t=this.locationBoundsCheck(e);if(null==t)return this.defaultId;let n=this.get_width();return this.frames[t.frame??0][function({x:e,y:t},n){return n*t+e}(t,n)]}update(){this.renderer.update()}confirmElm(e,t){return this.getPixelId(e)===("string"==typeof t?this.nameToId(t):t)}totalWithin(e,t){return e.filter(e=>this.confirmElm(e,t)).length}static #e=this._moore=E();mooreNearbyCounter(e,t){return this.totalWithin(c(A._moore,e),t)}fundamentalNewState(e,t,n){return(t&1<<this.fundamentalStatesWithin(e,n))!=0}fundamentalStatesWithin(e,t){return e.map(e=>this.confirmElm(e,t)?1:0).reduce((e,t)=>e<<1|t)}static #t=this._wolfram=x();wolframNewState(e,t,n){return e.loop??=!1,this.fundamentalNewState(c(A._wolfram,e),t,n)}wolframNearby(e,t){return e.loop??=!1,this.fundamentalStatesWithin(c(A._wolfram,e),t)}wolframNearbyCounter(e,t,n){return"string"==typeof n&&(n=parseInt(n,2)),this.wolframNearby(e,t)===n}setPixel(e,t){let n=0;if("string"==typeof t){if(-1===(n=this.nameToId(t)))throw Error(`Element name ${t} is invalid`)}else n=t;let r=this.locationBoundsCheck(e);if(null==r)return;this.renderer.renderPixel(r,n);let i=this.get_width();this.frames[0][function({x:e,y:t},n){return n*t+e}(r,i)]=n}iterate(){if(this.onIterate()??!0){for(let e=this.frames.length-1;e>=0;e--)if(e>0){let t=e-1;this.frames[e].set(this.frames[t])}let e=this.get_width(),t=this.get_height(),n=Array(this.elements.length);this.pixelCounts={};for(let r=0;r<e;r++)for(let i=0;i<t;i++){let l=this.getPixelId({x:r,y:i,frame:1});if(l===this.defaultId)continue;let{elements:{[l]:o}}=this;if(void 0===o)throw Error("This isn't supposed to happen, but the internal pixel buffer was currupted. This is likely a bug, or a symptom of improper direct access to the current memory buffer");void 0!==o.liveCell&&o.liveCell({x:r,y:i,oldId:l,thisId:l}),void 0===this.pixelCounts[l]?this.pixelCounts[l]=1:this.pixelCounts[l]++,void 0!==o.deadCell&&(n[l]??=new Uint8Array(Math.ceil(e*t/8)),o.hitbox.forEach(t=>{let s={x:r+t.x,y:i+t.y},a=this.locationBoundsCheck(s)??s,d=Math.floor(function({x:e,y:t},n){return n*t+e}(a,e)/8),{[l]:{[d]:u}}=n,c=1<<a.x%8;(u&c)==0&&this.confirmElm({x:a.x,y:a.y,frame:1},this.defaultId)&&(void 0!==o.deadCell&&o.deadCell({x:a.x,y:a.y,oldId:this.defaultId,thisId:l}),n[l][d]=u|c)}))}this.update(),this.onAfterIterate()}if("playing"===this.mode){var e,t;this.loopint=(e=this.loopint,t=()=>{this.iterate()},"undefined"==typeof requestAnimationFrame?e:requestAnimationFrame(t))}}}const{version:I}=a,C="PixelManipulator v"+I+" Copyright (C) 2018-2024 Nathan Fritzler\nThis program comes with ABSOLUTELY NO WARRANTY\nThis is free software, and you are welcome to redistribute it\nunder certain conditions, as according to the GNU GENERAL PUBLIC LICENSE version 3 or later.";Object.keys(d).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:function(){return d[e]}})});!function(e,t,n,r){let i=".bs.collapse",l=`show${i}`,o=`shown${i}`,s=`hide${i}`,a=`hidden${i}`,d=`click${i}.data-api`,u="show",c="collapse",h="collapsing",m=`:scope .${c} .${c}`,f='[data-bs-toggle="collapse"]',g={parent:null,toggle:!0},p={parent:"(null|element)",toggle:"boolean"};class y extends e{constructor(e,t){for(let r of(super(e,t),this._isTransitioning=!1,this._triggerArray=[],n.find(f))){let e=n.getSelectorFromElement(r),t=n.find(e).filter(e=>e===this._element);null!==e&&t.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return g}static get DefaultType(){return p}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>y.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning||t.trigger(this._element,l).defaultPrevented)return;for(let t of e)t.hide();let n=this._getDimension();this._element.classList.remove(c),this._element.classList.add(h),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let r=n[0].toUpperCase()+n.slice(1),i=`scroll${r}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(h),this._element.classList.add(c,u),this._element.style[n]="",t.trigger(this._element,o)},this._element,!0),this._element.style[n]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||t.trigger(this._element,s).defaultPrevented)return;let e=this._getDimension();for(let t of(this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,r.reflow(this._element),this._element.classList.add(h),this._element.classList.remove(c,u),this._triggerArray)){let e=n.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(h),this._element.classList.add(c),t.trigger(this._element,a)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(u)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=r.getElement(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(this._config.parent)for(let e of this._getFirstLevelChildren(f)){let t=n.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(e){let t=n.find(m,this._config.parent);return n.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(let n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){let t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){let n=y.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw TypeError(`No method named "${e}"`);n[e]()}})}}t.on(document,d,f,function(e){for(let t of(("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault(),n.getMultipleElementsFromSelector(this)))y.getOrCreateInstance(t,{toggle:!1}).toggle()}),r.defineJQueryPlugin(y)}(i("ka9Le"),i("dfTqR"),i("42WhZ"),i("9Dw5O"));var S={};function T(e){this.setFPS(e),this.then=Date.now()}S=T,T.prototype.setFPS=function(e){this.framerate=1e3/e},T.prototype.check=function(){var e=Date.now(),t=e-this.then;return t>this.framerate&&(this.then=e-t%this.framerate,!0)};let N=10,L=10;const k={x:0,y:0},B=document.getElementById("targeterX"),M=document.getElementById("targeterY"),O=document.getElementById("targeterStats");function D(e){if(null==eA)return;let{ctx:t}=Q;if(eA.imageSmoothingEnabled=!1,eA.strokeStyle="gray",eA.fillStyle="#88888888",t.strokeStyle="#FFFFFF88",t.fillStyle="#88888888",void 0===e&&(e={}),e.x??=N,e.y??=L,e.x>=0&&e.y>=0&&({x:N,y:L}=e),ex.checked?(t.fillRect(k.x+1,k.y,H.width,1),t.fillRect(k.x,k.y+1,1,H.height),t.fillRect(0,k.y,k.x,1),t.fillRect(k.x,0,1,k.y),O.classList.remove("visually-hidden"),B.innerText=k.x.toString(),M.innerText=k.y.toString()):O.classList.add("visually-hidden"),eA.clearRect(0,0,er.width,er.height),eA.drawImage(H,N-Math.floor(eI/2),L-Math.floor(eI/2),Math.floor(er.width/eI),Math.floor(er.height/eI),0,0,er.width,er.height),eE.checked){let e=er.width/eI,n=er.height/eI,r=N-er.width/(2*eI),i=L-er.height/(2*eI);t.fillRect(r,i,e,n),k.x>=r&&k.x<=r+e&&k.y>=i&&k.y<=i+n&&t.strokeRect(r,i,e,n)}eA.beginPath();for(let e=1;e<er.width/eI;e++)eA.moveTo(e*eI,0),eA.lineTo(e*eI,er.height);for(let e=1;e<er.height/eI;e++)eA.moveTo(0,e*eI),eA.lineTo(er.width,e*eI);eA.stroke()}function P({offsetX:e,offsetY:t}){k.x=e,k.y=t,K.update(),D()}const R=new((e=S)&&e.__esModule?e.default:e)(60),F=document.getElementById("fps"),j=document.getElementById("fpsMax"),$=document.getElementById("fpsUnlimited"),W=document.getElementById("fpsAmount");let q=0,z=performance.now();W.addEventListener("change",()=>{let{value:e}=W;R.setFPS(parseInt(e)),j.innerText=e}),$.addEventListener("change",()=>{if($.checked)j.innerText="unlimited";else{let{value:e}=W;j.innerText=e}});const U=document.getElementById("frames"),Y=document.getElementById("pixelRatio"),H=document.getElementById("canvas");H.addEventListener("click",e=>{K.update(),D({x:e.offsetX,y:e.offsetY})}),H.addEventListener("mousemove",P);const Q=new o.Ctx2dRenderer(H),K=new o.PixelManipulator(Q,1,1);function V(){let e=K.getElementByName(X.value);if(null==e)return;let{renderAs:t,name:n}=e;J.value=`#${t.slice(0,3).map(e=>e.toString(16).padStart(2,"0")).join()}`;let r=(t[3]??255).toString();Z.value=r,ee.innerText=r,et.value=n}function G(){console.log("change color");let e=K.nameToId(X.value);if(-1===e)return;let t=/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(J.value);null!=t&&K.modifyElement(e,{renderAs:[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),parseInt(Z.value)]})}const X=document.getElementById("customSelect");X.addEventListener("change",()=>{V()});const J=document.getElementById("customizeColor");J.addEventListener("change",G);const Z=document.getElementById("customColorAlpha");Z.addEventListener("change",G);const ee=document.getElementById("customColorAlphaText"),et=document.getElementById("customizeName");function en(e){let t={x:Math.floor(e.offsetX/eI)+Math.floor(N-eI/2),y:Math.floor(e.offsetY/eI)+Math.floor(L-eI/2)},n=e.ctrlKey?ef.value:e.altKey?ep.value:eh.value,r=K.confirmElm(t,n)?K.defaultId:n;K.setPixel(t,r),K.update(),D()}et.addEventListener("change",function(){let{value:e}=this;console.log("change name",e);let t=K.nameToId(X.value);t>-1&&K.modifyElement(t,{name:e}),V()});const er=document.getElementById("zoom");function ei(){eo.title="Play";let e=eo.querySelector("i");e?.classList.replace("fa-pause","fa-play"),e?.setAttribute("alt","Play")}er.addEventListener("click",en),er.addEventListener("drag",en),er.addEventListener("mousemove",e=>{let t=Math.floor(e.offsetX/eI),n=Math.floor(e.offsetY/eI);P({offsetX:t+N-er.width/(2*eI),offsetY:n+L-er.width/(2*eI)})});const el=document.getElementById("reset");el.addEventListener("click",function(){let e=parseInt(ea.value),t=parseInt(ed.value),n=parseInt(ec.value),r=parseInt(eu.value);K.reset({canvasW:e,canvasH:t}),er.width=(Number.isNaN(n)?er.width/eI:n)*eI,er.height=(Number.isNaN(r)?er.height/eI:r)*eI,ei(),es.disabled=!1,this.disabled=!1,q=0,K.iterate()});const eo=document.getElementById("play");eo.addEventListener("click",()=>{"paused"===K.mode?(K.play(),function(){eo.title="Pause";let e=eo.querySelector("i");e?.classList.replace("fa-play","fa-pause"),e?.setAttribute("alt","Pause")}(),es.disabled=!0):(K.pause(),ei(),es.disabled=!1)});const es=document.getElementById("oneFrameAtATime");es.addEventListener("click",()=>{K.iterate()});const ea=document.getElementById("width"),ed=document.getElementById("height"),eu=document.getElementById("zoomHeightElm"),ec=document.getElementById("zoomWidthElm"),eh=document.getElementById("normalSelect");document.getElementById("normalFill").addEventListener("click",()=>{let e=parseInt(em.value);K.randomlyFill(eh.value,Number.isNaN(e)?15:e),K.update(),D()});const em=document.getElementById("normalFillP"),ef=document.getElementById("ctrlSelect");document.getElementById("ctrlFill").addEventListener("click",()=>{let e=parseInt(eg.value);K.randomlyFill(ef.value,Number.isNaN(e)?15:e),K.update(),D()});const eg=document.getElementById("ctrlFillP"),ep=document.getElementById("altSelect");document.getElementById("altFill").addEventListener("click",()=>{let e=parseInt(ey.value);K.randomlyFill(ep.value,Number.isNaN(e)?15:e),K.update(),D()});const ey=document.getElementById("altFillP"),ex=document.getElementById("shtargeter");ex.addEventListener("click",function(){K.update(),D()});const eE=document.getElementById("shfocusbox"),ev=document.getElementById("pixelCounterT");ev.addEventListener("change",function(){this.checked?ew.classList.remove("visually-hidden"):ew.classList.add("visually-hidden")}),document.getElementById("backendversion").innerText=o.version;const eb=document.getElementById("pixelCounter"),ew=document.getElementById("pixelCounterBox"),e_=document.getElementsByClassName("elmDrop"),eA=er.getContext("2d");if(null==eA)throw Error("rendering context not supported");const eI=20;D({x:Math.floor(er.width/2)-Math.floor(er.width/2)*eI,y:Math.floor(er.height/2)-Math.floor(er.height/2)*eI}),K.onElementModified=()=>{let{value:e}=eh,{value:t}=ef,{value:n}=ep,{value:r}=X;0===e.length&&(e="Conway's Game Of Life"),0===t.length&&(t="Blocks"),0===n.length&&(n="Water"),0===r.length&&(r="Conway's Game Of Life"),Array.from(e_).forEach(e=>{e.innerHTML="",K.elements.forEach(t=>{let n=document.createElement("option"),{name:r}=t;n.innerText=r,e.appendChild(n)})}),eh.value=K.getElementByName(e)?.name??"",ef.value=K.getElementByName(t)?.name??"",ep.value=K.getElementByName(n)?.name??"",X.value=K.getElementByName(r)?.name??"",V()},K.addMultipleElements({Acid:{renderAs:[110,162,10,255],liveCell:({x:e,y:t,oldId:n})=>{let r=new Uint8Array(3);window.crypto.getRandomValues(r);let[i,l,o]=Array.from(r),s={x:e+i%3+-1,y:t+l%4,loop:!1},a=K.get_height();for(;(s.y>=a||K.confirmElm(s,n))&&s.y+-1>=t;)s.y--;K.confirmElm(s,n)?o%100==0&&K.setPixel(s,K.defaultId):(K.setPixel({x:e,y:t,loop:!1},K.defaultId),K.setPixel(s,n))}},Blocks:{renderAs:[127,127,127,255]},"Brian's Brain (dying)":{renderAs:[254,254,254,255],liveCell:e=>{K.setPixel(e,K.defaultId)}},"Brian's Brain (on)":{...(0,o.rules).lifelike(K,"B2/S"),renderAs:[0,0,254,255],liveCell:e=>{K.setPixel(e,"Brian's Brain (dying)")}},Seeds:{...(0,o.rules).lifelike(K,"B2/S"),renderAs:[194,178,128]},"Conway's Game Of Life":{...(0,o.rules).lifelike(K,"B3/S23"),renderAs:[0,255,0,255]},"Wireworld Conductor":{renderAs:[67,75,77,255],liveCell:e=>{let t=K.nameToId("Wireworld Electricity");if(-1===t)return;let{x:n,y:r}=e,i=K.mooreNearbyCounter({x:n,y:r,frame:1},t);new Set([1,2]).has(i)&&K.setPixel(e,t)}},"Wireworld Electricity":{renderAs:[148,133,0,255],liveCell:({x:e,y:t})=>{K.setPixel({x:e,y:t,loop:!1},"Wireworld FadingElectricity")}},"Wireworld FadingElectricity":{renderAs:[74,61,0,255],liveCell:({x:e,y:t})=>{K.setPixel({x:e,y:t,loop:!1},"Wireworld Conductor")}},Highlife:{...(0,o.rules).lifelike(K,"B36/S23"),renderAs:[0,255,128,255]},"No-loop Conway's Game Of Life":{...(0,o.rules).lifelike(K,"B3/S23",!1),renderAs:[0,150,0,255]},"Rule 30":{...(0,o.rules).wolfram(K,"Rule 30",!1),renderAs:[255,0,255,255]},"Rule 90":{...(0,o.rules).wolfram(K,"Rule 90",!1),renderAs:[147,112,219,255]},"Rule 110":{...(0,o.rules).wolfram(K,"Rule 110",!1),renderAs:[128,0,128,255]},"Rule 184":{...(0,o.rules).wolfram(K,"Rule 184",!1),renderAs:[255,51,153,255]},Water:{renderAs:[23,103,167,255],liveCell:({x:e,y:t,oldId:n})=>{let r=new Uint8Array(2);window.crypto.getRandomValues(r);let[i,l]=Array.from(r),o={x:e+i%3+-1,y:t+l%4,loop:!1},s=K.get_height();for(;(o.y>=s||!K.confirmElm(o,K.defaultId))&&o.y+-1>=t;)o.y--;K.confirmElm(o,K.defaultId)&&(K.setPixel({x:e,y:t,loop:!1},K.defaultId),K.setPixel(o,n))}}}),K.onIterate=()=>(function(){if(!$.checked&&!R.check())return!1;U.innerText=`${++q}`,F.innerText=(1/((performance.now()-z)/1e3)).toFixed(3),z=performance.now()})(),K.onAfterIterate=()=>{D(),function(e){if(Y.innerHTML="",!ev.checked)return;eb.innerHTML="",Y.style.background=`rgb(${Q.renderInfo[e.defaultId].slice(0,-1).join(",")})`;let t=e.get_width()*e.get_height();Object.keys(e.elements).forEach(n=>{let r=parseInt(n),{elements:{[r]:{name:i}},pixelCounts:{[r]:l}}=e;if(void 0===l)return;let o="rgb("+Q.renderInfo[r].slice(0,-1).join(",")+")",s=l/t*100,a=document.createElement("li");a.classList.add("list-group-item");{let e=document.createElement("i");e.classList.add("fa-solid","fa-square-poll-horizontal"),e.style.color=o,e.setAttribute("aria-hidden","true"),a.appendChild(e)}a.appendChild(document.createTextNode(` ${i}: `));{let e=document.createElement("span");e.classList.add("badge","bg-primary"),e.innerText=`${l}`;{let t=document.createElement("span");t.classList.add("visually-hidden"),t.innerText=" pixels",e.appendChild(t)}a.appendChild(e)}a.appendChild(document.createTextNode(" "));{let e=document.createElement("span");e.classList.add("badge","bg-secondary"),e.innerText=`${Math.round(s)}%`,a.appendChild(e)}eb.appendChild(a);let d=document.createElement("div");d.classList.add("progress-bar"),d.setAttribute("role","progressbar"),d.style.backgroundColor=o,d.style.width=`${s}%`,d.setAttribute("aria-valuenow",`${Math.round(s)}`),d.setAttribute("aria-valuetext",`${Math.round(s)}% full of ${i}`),d.setAttribute("aria-valuemin","0"),d.setAttribute("aria-valuemax","100"),d.title=`${i} : ${Math.round(s)}%`,Y.appendChild(d)})}(K)},z=performance.now(),el.click();
//# sourceMappingURL=pixelmanipulator.2b555b87.js.map
